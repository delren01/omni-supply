spring.application.name=omni-supply
# Allow Render to set the port, or default to 8080 if running locally
server.port=${PORT:8080}

# ===============================
# DATABASE CONFIG
# ===============================
spring.datasource.url=${SPRING_DATASOURCE_URL}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD}

# Driver
spring.datasource.driver-class-name=org.postgresql.Driver

# Dialect - Explicitly use PostgreSQLDialect
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

# ===============================
# POOLER SAFE SETTINGS
# ===============================
# "update" can sometimes fail with Transaction poolers.
spring.jpa.hibernate.ddl-auto=update

# Disable feature that breaks with Supabase Transaction Poolers
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true

# Keep connection healthy
spring.datasource.test-on-borrow=true
spring.datasource.validation-query=SELECT 1